"use strict";(self["webpackChunktwitter_project_v1"]=self["webpackChunktwitter_project_v1"]||[]).push([[511],{3216:function(t,e,a){a.d(e,{Z:function(){return m}});var s=function(){var t=this,e=t._self._c;return e("form",{staticClass:"form d-flex flex-column align-items-center",attrs:{id:"Form",autocomplete:"off"},on:{submit:function(e){return e.preventDefault(),t.handleForm.apply(null,arguments)}}},[e("div",{staticClass:"form-control d-flex flex-column"},[e("label",{staticClass:"form-label",attrs:{for:"account"}},[t._v("帳號")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.UserData.account,expression:"UserData.account"}],staticClass:"form-input form:hover",attrs:{id:"account",name:"account",type:"text",placeholder:"請輸入帳號",autocomplete:"account",required:"",autofocus:""},domProps:{value:t.UserData.account},on:{input:function(e){e.target.composing||t.$set(t.UserData,"account",e.target.value)}}})]),e("div",{staticClass:"form-control d-flex flex-column"},[e("label",{staticClass:"form-label",attrs:{for:"name"}},[t._v("名稱")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.UserData.name,expression:"UserData.name"}],staticClass:"form-input",attrs:{id:"name",name:"name",type:"text",placeholder:"請輸入使用者名稱",autocomplete:"name",required:""},domProps:{value:t.UserData.name},on:{input:function(e){e.target.composing||t.$set(t.UserData,"name",e.target.value)}}})]),e("div",{staticClass:"error__section d-flex justify-content-between w-100"},[t.countName>50?e("p",{staticClass:"error__section__handler fs-12"},[t._v("字數超出上限!")]):t._e(),t.countName>50?e("p",{staticClass:"fs-12"},[t._v(t._s(t.countName)+"/50")]):t._e()]),e("div",{staticClass:"form-control d-flex flex-column"},[e("label",{staticClass:"form-label",attrs:{for:"email"}},[t._v("Email")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.UserData.email,expression:"UserData.email"}],staticClass:"form-input",attrs:{id:"email",name:"email",type:"text",placeholder:"請輸入Eamil",autocomplete:"email",required:""},domProps:{value:t.UserData.email},on:{input:function(e){e.target.composing||t.$set(t.UserData,"email",e.target.value)}}})]),e("div",{staticClass:"form-control d-flex flex-column"},[e("label",{staticClass:"form-label",attrs:{for:"password"}},[t._v("密碼")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.UserData.password,expression:"UserData.password"}],staticClass:"form-input",attrs:{id:"password",name:"password",type:"password",placeholder:"請設定密碼",autocomplete:"new-password",required:""},domProps:{value:t.UserData.password},on:{input:function(e){e.target.composing||t.$set(t.UserData,"password",e.target.value)}}})]),e("div",{staticClass:"form-control d-flex flex-column"},[e("label",{staticClass:"form-label",attrs:{for:"password-check"}},[t._v("密碼確認")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.UserData.checkPassword,expression:"UserData.checkPassword"}],staticClass:"form-input",attrs:{id:"password-check",name:"checkPassword",type:"password",placeholder:"請再次輸入密碼",autocomplete:"new-password",required:""},domProps:{value:t.UserData.checkPassword},on:{input:function(e){e.target.composing||t.$set(t.UserData,"checkPassword",e.target.value)}}})])])},r=[],i=a(6163),n={props:{initialUserSetting:{type:Object,default:()=>({id:"",account:"",name:"",email:"",password:"",checkPassword:""})}},data(){return{UserData:{}}},created(){this.fetchUserData()},methods:{fetchUserData(){this.UserData={...this.initialUserSetting}},handleForm(){if(!this.UserData.account)return void i.F.fire({icon:"warning",title:"請填入帳號"});if(!this.UserData.name)return void i.F.fire({icon:"warning",title:"請填入名稱 "});if(this.UserData.account.trim().length<=0||this.UserData.name.trim().length<=0)return void i.F.fire({icon:"warning",title:"所有欄位皆須填寫"});if(this.UserData.name.length>50)return void i.F.fire({icon:"warning",title:"名稱不能大於50個字"});if(!this.UserData.email)return void i.F.fire({icon:"warning",title:"請填入Email"});if(!this.UserData.password)return void i.F.fire({icon:"warning",title:"請填入密碼"});if(!this.UserData.checkPassword)return void i.F.fire({icon:"warning",title:"請填入確認密碼"});if(this.UserData.checkPassword!==this.UserData.password)return this.UserData.checkPassword="",this.UserData.password="",void i.F.fire({icon:"warning",title:"請再次確認密碼"});const t=this.UserData;this.$emit("afterSubmit",t)}},watch:{initialUserSetting(){this.UserData={...this.initialUserSetting}}},computed:{countName(){return this.UserData.name.length}}},o=n,c=a(1001),l=(0,c.Z)(o,s,r,!1,null,"5f72b26c",null),m=l.exports},4269:function(t,e,a){a.r(e),a.d(e,{default:function(){return f}});var s=function(){var t=this,e=t._self._c;return e("main",{staticClass:"container d-flex"},[e("div",{staticClass:"container__left"},[e("Navbar")],1),e("div",{staticClass:"container__right d-flex"},[e("div",{staticClass:"section"},[e("h4",{staticClass:"title"},[t._v("帳號設定")]),e("SettingForm",{ref:"formRef",attrs:{initialUserSetting:t.userData},on:{afterSubmit:t.handleAfterSubmit}}),e("div",{staticClass:"d-flex justify-content-end"},[e("button",{staticClass:"btn btn-main btn-main:hover btn-main:active",attrs:{type:"submit",disabled:t.isProcessing},on:{click:t.getData}},[t._v(" 儲存 ")])])],1)])])},r=[],i=a(3216),n=a(4431),o=a(9682),c=a(6163),l={components:{Navbar:n.Z,SettingForm:i.Z},data(){return{userData:{},isProcessing:!1}},created(){const{id:t}=this.$route.params;console.log(t),this.fetchData(Number(t))},methods:{async fetchData(t){try{const{data:e}=await o.Z.getUser({id:t});console.log(e),this.userData={...e}}catch(e){console.log("getUser error:",e),c.F.fire({icon:"warning",title:"無法讀取使用者"})}},getData(){this.$refs.formRef.handleForm()},async handleAfterSubmit(t){this.userData={...t},this.isProcessing=!0;try{const{data:t}=await o.Z.putUser({id:this.userData.id,account:this.userData.account.trim(),name:this.userData.name.trim(),email:this.userData.email.trim(),password:this.userData.password,checkPassword:this.userData.checkPassword});c.F.fire({icon:"success",title:"修改成功"}),this.isProcessing=!1}catch(e){this.isProcessing=!1;const t=e.response.data.message;console.log(e.response.data.message),"Error: account 已存在"===t?c.F.fire({icon:"warning",title:"account 已重複註冊！"}):"Error: email 已存在"===t?c.F.fire({icon:"warning",title:"email 已重複註冊！"}):"Error: 所有欄位皆須填寫"===t?c.F.fire({icon:"warning",title:"所有欄位皆須填寫！"}):c.F.fire({icon:"warning",title:"無法修改請稍後再試"})}}}},m=l,u=a(1001),d=(0,u.Z)(m,s,r,!1,null,"0049837f",null),f=d.exports}}]);
//# sourceMappingURL=511.fbf319aa.js.map