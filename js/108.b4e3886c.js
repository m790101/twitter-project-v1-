"use strict";(self["webpackChunktwitter_project_v1"]=self["webpackChunktwitter_project_v1"]||[]).push([[108],{6814:function(t,e,s){s.r(e),s.d(e,{default:function(){return M}});var i=function(){var t=this,e=t._self._c;return e("main",{staticClass:"container d-flex"},[e("div",{staticClass:"container__left"},[e("Navbar",{on:{navCreateTweet:t.handleAfterCreatedTweet}})],1),e("div",{staticClass:"container__right d-flex"},[e("div",{staticClass:"section"},[e("h4",{staticClass:"title"},[t._v("首頁")]),t.isEditing?e("NewTweetModal",{on:{afterCloseModal:t.handleAfterCloseModal,afterCreatedTweet:t.handleAfterCreatedTweet}}):t._e(),e("div",{staticClass:"modal-bg",class:{active:t.isEditing}}),e("CreateTweet",{attrs:{navIsEditing:t.isEditing},on:{afterCallModal:t.handleAfterCallModal}}),t.isProcessing?e("Spinner"):e("TweetList",{attrs:{"initial-tweets":t.tweets}})],1)]),e("div",{}),e("PopularList")],1)},a=[],n=(s(541),s(4431)),r=s(1410),l=s(9098),d=function(){var t=this,e=t._self._c;return e("section",[e("div",{staticClass:"create-tweet"},[e("div",{staticClass:"create-tweet__body"},[e("div",{staticClass:"d-flex align-items-center"},[e("img",{staticClass:"create-tweet__body__avater",attrs:{src:t._f("emptyImage")(t.currentUser.image),alt:""}}),e("h5",{staticClass:"card-title"},[t._v("有什麼新鮮事?")])]),e("div",{staticClass:"d-flex flex-row-reverse"},[e("button",{staticClass:"btn-main create-tweet__body__btn-tweet",on:{click:t.callModal}},[t._v(" 推文 ")])])])])])},c=[],o=s(3459),h=s(3822),w={props:{navIsEditing:{type:Boolean,require:!0}},data(){return{isEditing:this.navIsEditing}},methods:{callModal(){this.$emit("afterCallModal")},handleAfterCloseModal(){this.isEditing=!1}},components:{},watch:{navIsEditing(t){this.isEditing=t}},mixins:[o.L],computed:{...(0,h.rn)(["currentUser","isAuthenticated"])}},f=w,u=s(1001),g=(0,u.Z)(f,d,c,!1,null,"0c586df6",null),C=g.exports,v=s(5352),_=s(8431),m=s(6163),p=s(332),T={data(){return{isEditing:!1,tweets:[],isProcessing:!1}},components:{Navbar:n.Z,CreateTweet:C,PopularList:l.Z,TweetList:r.Z,Spinner:p.Z,NewTweetModal:v.Z},methods:{handleAfterCallModal(){this.isEditing=!0},handleAfterCloseModal(){this.isEditing=!1},handleAfterCreatedTweet(t){this.isEditing=!1,this.tweets.unshift({...t,UserId:2,isLiked:!1,likeNum:0,replyNum:0})},async fetchTweets(){try{this.isProcessing=!0;const{data:t}=await _.Z.getTweets();this.tweets=t,this.tweets=this.tweets.map((t=>t.user.image?t:{...t,user:{...t.user,image:"https://i.imgur.com/mVOT0IN.png"}})),this.isProcessing=!1}catch(t){this.isProcessing=!1,m.F.fire({icon:"warning",title:"無法讀取推文"})}}},created(){this.fetchTweets()}},E=T,b=(0,u.Z)(E,i,a,!1,null,"132ea2bc",null),M=b.exports}}]);
//# sourceMappingURL=108.b4e3886c.js.map